{"version":3,"sources":["webpack:///webpack/bootstrap 37369fbc20c8b21e12cb?dcc0","webpack:///./public/js/event/index/index.js","webpack:///./public/js/event/index/router/main.js","webpack:///./public/js/event/index/controller/main.js","webpack:///./public/js/event/index/view/map.js","webpack:///./public/js/shared/view/map.js","webpack:///./public/js/map/leafletViewer.js","webpack:///./public/js/util/class.js","webpack:///./public/js/map/mapViewer.js","webpack:///./public/js/event/index/view/calendar.js"],"names":["MainRouter","require","$","router","Backbone","history","start","console","log","MainController","controller","mainRouter","Router","extend","name","routes","init","initialize","initZoom","x","y","zoomToLocation","module","exports","MapView","CalendarView","mainController","_mapView","_calendarView","scope","render","onEventsLoaded","eventData","view","group","_","groupBy","v","id","data","map","index","value","local","format","end","link","eventUrl","_id","x_coord","location","y_coord","template","title","description","address","city","state","zip","addClusterMarkers","onEventClick","event","jsEvent","onEventMouseOver","BaseMap","el","mapData","makeMap","renderControls","onMapLoaded","LeafletViewer","View","type","mapControlsTemplate","mapDataLoaded","selectedLayer","selectedFeature","selectedFeatureName","selectedLayers","singleSelect","mapParams","areatype","areacode","showMarkers","clusterMarkerCache","options","loadMapData","mapViewer","center","L","LatLng","zoomLevel","scrollZoom","clusterOptions","showCoverageOnHover","spiderfyOnMaxZoom","maxClusterRadius","iconCreateFunction","cluster","childCount","getChildCount","c","DivIcon","html","className","iconSize","Point","model","Model","counter","loadData","layer","url","fetch","success","newData","toJSON","length","showLayer","setInitialAreaType","getLayer","getGeomName","updateHoverText","nameField","layerStyle","style","mouseoverStyle","fillOpacity","selectedStyle","opacity","color","weight","clearGeoJsonFeatures","addGeoJsonLayer","onEachFeature","feature","properties","on","e","layerGroup","getGeoJsonGroup","each","getLayers","layers","l","resetStyle","target","i","splice","push","sl","region","areacodes","params","setStyle","props","join","onGeomSelected","call","Browser","ie","opera","bringToFront","prop","area","text","onFeatureMouseover","onFeatureMouseout","after","zoomToXY","mapControlClick","currentTarget","attr","parent","find","remove","append","onLayerChanged","getCurrentParams","selectGeom","featureNames","selectStyle","geoJsonGrp","f","eachLayer","toLowerCase","popupTemplate","clearClusterMarkers","d","m","createMarker","bindPopup","addClusterMarker","setShowMarkers","lon","lat","level","lvl","zoomToPoint","setMapClickMode","mode","Class","MapViewer","define","_className","prototype","apply","arguments","minimal","tileLayer","baseMaps","features","FeatureGroup","geoJsonFeatures","geoJson","clusterGroup","MarkerClusterGroup","overlayMaps","zoom","scrollWheelZoom","baseLayers","undefined","overlays","getFeatureGroup","option","addLayer","clearLayers","addFeatureToFeatureGroup","clearFeatures","createFeature","obj","wkt","Wkt","read","toObject","lng","marker","latLng","getClusterGroup","getFeaturesBound","getBounds","getGeoJsonFeaturesBound","zoomToFeatures","bounds","fitBounds","zoomToGeoJsonFeatures","point","z","getMaxZoom","latlng","setView","pointInPolygon","vs","inside","j","xi","yi","xj","yj","intersect","child","ch","p","_class_","copy","F","constructor","dest","source","property","sourceIsEvt","window","Event","hasOwnProperty","toString","zoomToExtent","extent","LatLngBounds","xmin","ymin","xmax","ymax","zoomToFullExtent","zoomIn","zoomOut","zoomToDataExtent","panTo","locate","locateAndSetView","Calendar","fullCalendar","header","left","right","editable","eventSources","eventLimit","eventMouseover","eventClick","loading","isLoading"],"mappings":"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","file":"eventIndex-bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 37369fbc20c8b21e12cb","/*\r\nTu Hoang\t\r\nESRGC2017\r\n\r\nmap view package\r\n\r\n*/\r\n\r\nvar MainRouter = require('./router/main.js');\r\n\r\n$(() => {\r\n  var router = new MainRouter();\r\n  //finally starts backbone history;\r\n  Backbone.history.start();\r\n  console.log('App initiated...')\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./public/js/event/index/index.js","/*\r\nTu Hoang\r\nMarch 2017\r\n\r\nmain router for event/index page\r\n*/\r\n\r\n// var MapView = require('../view/map.js');\r\n// var CalendarView = require('../view/calendar');\r\n\r\n// //views\r\n// var mapView = new MapView();\r\n// var calendarView = new CalendarView();\r\n\r\nvar MainController = require('../controller/main');\r\nvar controller = new MainController();\r\n\r\n//router definition\r\nvar mainRouter = Backbone.Router.extend({\r\n  name: 'EventIndex',\r\n  routes: {\r\n    '': 'init',\r\n    ':x/:y': 'initZoom'\r\n  },\r\n  init: () => {\r\n    //initialize components\r\n    controller.initialize();\r\n\r\n    //return controller;\r\n  },\r\n  initZoom: (x, y) => {\r\n    this.init();\r\n    controller.zoomToLocation(x, y);\r\n  }\r\n});\r\n\r\nmodule.exports = mainRouter;\r\n\n\n\n// WEBPACK FOOTER //\n// ./public/js/event/index/router/main.js","/*\r\nTu Hoang\r\nMarch 2017\r\n\r\nController class that handles map and calendar view \r\n\r\nES6 rocks\r\n*/\r\nvar MapView = require('../view/map.js');\r\nvar CalendarView = require('../view/calendar');\r\n\r\n\r\nclass mainController {\r\n  constructor() {\r\n    //views\r\n    this._mapView = new MapView();\r\n    this._calendarView = new CalendarView();\r\n  }\r\n  //initialize view components \r\n  initialize() {\r\n    console.log('Initializing...');\r\n    var scope = this;\r\n    //render map\r\n    scope._mapView.render();\r\n    //wire event callback for calendar\r\n    scope._calendarView.onEventsLoaded = (eventData, view) => {\r\n      console.log(`this event is called from controller!`);\r\n      console.log(eventData);\r\n      let group = _.groupBy(eventData, (v) => { return v.id; });\r\n      let data = _.map(group, (v, index) => {\r\n        let value = v[0]; //only take the first element\r\n        let start = value.start.local().format('dddd, MMMM Do YYYY, h:mm:ss a');\r\n        let end = value.end != null ?\r\n          value.end.local().format('dddd, MMMM Do YYYY, h: mm: ss a') : '';\r\n        let link = value.eventUrl ? \r\n          `<a href=\"${value.eventUrl}\">${value.eventUrl}</a>`:\r\n          'Not specified';\r\n\r\n        return {\r\n          id: value._id,\r\n          x_coord: value.location.x,\r\n          y_coord: value.location.y,\r\n          template: `\r\n            <h4>\r\n              <strong>${value.title}</strong>\r\n              <small>\r\n                <a href=\"edit?id=${value._id}\"><i class=\"fa fa-pencil\"></i></a>\r\n              </small>\r\n            </h4>\r\n            <p>\r\n              <strong>Start</strong>: ${start} <br/>\r\n              <strong>End</strong>: ${end} <br/>\r\n              <strong>Description</strong>: ${value.description} <br/>\r\n              <strong>Location</strong>: ${value.address} ${value.city}, ${value.state} ${value.zip}<br/>\r\n              <strong>Url</strong>: ${link}\r\n            </p>\r\n          `\r\n        };\r\n      });\r\n\r\n\r\n      console.log(data);\r\n\r\n      scope._mapView.addClusterMarkers(data);\r\n\r\n    };\r\n\r\n    scope._calendarView.onEventClick = (event, jsEvent, view) => {\r\n\r\n      var location = event.location;\r\n      if (typeof location == 'undefined')\r\n        return;\r\n      scope._mapView.zoomToLocation(location.x, location.y);\r\n    };\r\n    scope._calendarView.onEventMouseOver = (event, jsEvent, view) => {\r\n      //for editing\r\n    };\r\n\r\n    //render calendar\r\n    scope._calendarView.render();\r\n  }\r\n\r\n  get mapView() {\r\n    return this._mapView;\r\n  }\r\n\r\n  get calendarView() {\r\n    return this._calendarView;\r\n  }\r\n\r\n  zoomToLocation(x, y) {\r\n    this._mapView.zoomToLocation(x, y, 16);\r\n  }\r\n}\r\n\r\nmodule.exports = mainController;\n\n\n// WEBPACK FOOTER //\n// ./public/js/event/index/controller/main.js","/*\r\nAuthor: Tu Hoang\r\nESRGC2017\r\n\r\nView Map\r\n\r\n\r\nRequires leaflet.js\r\n\r\nEvents \r\nonMapLoaded --fired when map is done initialized\r\nonLayerChanged -- fired when new data is loaded to geojson\r\nonGeomSelected -- fired when mouse clicked layer (geometry)\r\nonFeatureMouseover -- fired when mouse is over a layer (geometry)\r\nonFeatureMouseout -- fired when mouse is out of a layer (geometry)\r\n\r\nsetMapClickMode -- set selection mode (single or multi)\r\n*/\r\nvar BaseMap = require('../../../shared/view/map.js');\r\n\r\nvar map = BaseMap.extend({\r\n  name: 'unite-map',\r\n  el: '.map',\r\n  mapData: [\r\n\r\n  ], //specified geojson layers (in sub views)\r\n  render: function() {\r\n    var scope = this;\r\n    scope.makeMap(); //set up map\r\n    scope.renderControls(); //render layer controls\r\n    if (typeof scope.onMapLoaded == 'function') {\r\n      scope.onMapLoaded();\r\n    }\r\n  }\r\n});\r\n\r\nmodule.exports = map;\r\n\n\n\n// WEBPACK FOOTER //\n// ./public/js/event/index/view/map.js","/*\r\nAuthor: Tu Hoang\r\nESRGC2017\r\n\r\nView Map\r\nbase map view using backbone.js\r\nelement: '.map'\r\nrender basic map for dashboards\r\n\r\nRequires leaflet.js\r\n\r\nEvents \r\nonMapLoaded --fired when map is done initialized\r\nonLayerChanged -- fired when new data is loaded to geojson\r\nonGeomSelected -- fired when mouse clicked layer (geometry)\r\nonFeatureMouseover -- fired when mouse is over a layer (geometry)\r\nonFeatureMouseout -- fired when mouse is out of a layer (geometry)\r\n\r\nsetMapClickMode -- set selection mode (single or multi)\r\n*/\r\nvar LeafletViewer = require('../../map/leafletViewer');\r\n\r\nvar map = Backbone.View.extend({\r\n  name: 'base-map',\r\n  el: '.map',\r\n  type: 'map',\r\n  mapControlsTemplate: '#map-control-tpl',\r\n  mapData: [\r\n    //defined in sub-classes\r\n    // For example\r\n    // {\r\n    //   name: 'Region',\r\n    //   type: 'layer',\r\n    //   label: '',\r\n    //   url: 'data/mdRegion.geojson',\r\n    //   nameField: 'Regions',\r\n    //   style: {\r\n    //     fill: true,\r\n    //     weight: 1,\r\n    //     fillOpacity: 0.1,\r\n    //     fillColor: '#2163B5',\r\n    //     color: '#000'\r\n    //   },\r\n    //   selected: true\r\n    // }\r\n  ], //specified geojson layers (in sub views)\r\n  mapDataLoaded: false,\r\n  selectedLayer: 'County', //geometry type \"County\" or \"Region\"\r\n  selectedFeature: null,\r\n  selectedFeatureName: '',\r\n  selectedLayers: [],\r\n  singleSelect: false,\r\n  mapParams: {\r\n    areatype: '01',\r\n    areacode: '0'\r\n  },\r\n  showMarkers: true,\r\n  clusterMarkerCache: [],\r\n  initialize: function() {\r\n    //this.render();\r\n  },\r\n  render: function(options) {\r\n    this.makeMap(); //set up map\r\n    this.loadMapData(options); //load geometry       \r\n    this.renderControls(); //render layer controls\r\n    console.log(this.name + ' view has been rendered..')\r\n  },\r\n  makeMap: function() {\r\n    this.mapViewer = new LeafletViewer({\r\n      el: this.el,\r\n      center: new L.LatLng(38.3607, -75.5994), //salisbury coordinates\r\n      zoomLevel: 10,\r\n      scrollZoom: true,\r\n      clusterOptions: {\r\n        showCoverageOnHover: false,\r\n        spiderfyOnMaxZoom: true,\r\n        maxClusterRadius: 40,\r\n        iconCreateFunction: function(cluster) {\r\n          var childCount = cluster.getChildCount();\r\n          var c = ' marker-cluster-';\r\n          if (childCount <= 5) {\r\n            c += 'small';\r\n          } else if (childCount <= 10) {\r\n            c += 'medium';\r\n          } else {\r\n            c += 'large';\r\n          }\r\n\r\n          return new L.DivIcon({\r\n            html: '<div><span>' + childCount + '</span></div>',\r\n            className: 'marker-cluster' + c,\r\n            iconSize: new L.Point(40, 40)\r\n          });\r\n        }\r\n      }\r\n    });\r\n  },\r\n  loadMapData: function(options) {\r\n    var scope = this;\r\n    //use backbone model to load layer data\r\n    var model = new Backbone.Model();\r\n    var mapData = this.mapData;\r\n    var counter = 0;\r\n    var loadData = function(layer) {\r\n      if (typeof layer == 'undefined') {\r\n        if (typeof scope.onMapLoaded == 'function') {\r\n          scope.onMapLoaded();\r\n        }\r\n        return;\r\n      }\r\n      if (layer.type == 'layer') {\r\n        model.url = layer.url;\r\n        model.fetch({\r\n          success: function(data) {\r\n            console.log('loaded map data for ' + layer.name);\r\n            var newData = data.toJSON();\r\n            layer.data = newData;\r\n            //move to the next one\r\n            counter++;\r\n            if (counter < mapData.length) { //load more if exists\r\n              loadData(mapData[counter]);\r\n            } else {\r\n\r\n              scope.mapDataLoaded = true;\r\n              //show the state layer by default\r\n              scope.showLayer(scope.selectedLayer, options);\r\n              // scope.updateCharts(); //initially load charts data\r\n\r\n              if (typeof scope.onMapLoaded == 'function') {\r\n                scope.onMapLoaded();\r\n              }\r\n            }\r\n          }\r\n        });\r\n      } else { //if data is not a layer skip to the next one\r\n        counter++;\r\n        if (counter < mapData.length) { //load more if exists\r\n          this.loadData(mapData[counter]);\r\n        } else {\r\n\r\n          scope.mapDataLoaded = true;\r\n          //show the state layer by default\r\n          scope.showLayer(scope.selectedLayer, options);\r\n          // scope.updateCharts(); //initially load charts data\r\n\r\n          if (typeof scope.onMapLoaded == 'function') {\r\n            scope.onMapLoaded();\r\n          }\r\n        }\r\n      }\r\n    };\r\n    loadData(mapData[counter]);\r\n  },\r\n  //clear geometry and add the layer that is being requested to show\r\n  showLayer: function(name, options) {\r\n    console.log(\"showing  layer \" + name);\r\n    var scope = this;\r\n    var setInitialAreaType = false;\r\n    var layer = this.getLayer(name);\r\n    if (typeof layer == 'undefined')\r\n      return;\r\n    scope.selectedLayer = name;\r\n    scope.selectedFeatureName = '';\r\n    scope.selectedFeature = null;\r\n    scope.selectedLayers = [];\r\n    var title = scope.getGeomName();\r\n    scope.updateHoverText();\r\n    var mapViewer = this.mapViewer;\r\n    var newData = layer.data;\r\n    var nameField = layer.nameField; //name of the property that contains geom name\r\n\r\n    //determine layer styles (either a function returning style or a style object)\r\n    var layerStyle = layer.style;\r\n    var mouseoverStyle = {\r\n      fillOpacity: 0.2\r\n    };\r\n    var selectedStyle = layer.selectedStyle || {\r\n      //fillOpacity: 0.5\r\n      //dashArray: '',\r\n      opacity: 1,\r\n      color: '#FCFF00',\r\n      //color: '#E2E600',\r\n      weight: 4\r\n    };\r\n    console.log(options); //custom styles passed in options --this will bypass default style and styled specified in layer data\r\n    if (typeof options != 'undefined') {\r\n      if (options.style)\r\n        layerStyle = options.style; //using function or style object\r\n      if (options.mouseoverStyle)\r\n        mouseoverStyle = options.mouseoverStyle;\r\n      if (options.selectedStyle)\r\n        selectedStyle = options.selectedStyle;\r\n    }\r\n\r\n\r\n    mapViewer.clearGeoJsonFeatures(); //clear old features\r\n    mapViewer.addGeoJsonLayer(newData, {\r\n      style: layerStyle,\r\n      //this call back handles mouse events on feature selection\r\n      onEachFeature: function(feature, layer) {\r\n\r\n        //set initial areatype once layer is loaded\r\n        if (!setInitialAreaType) {\r\n          setInitialAreaType = true;\r\n          scope.mapParams.areatype = feature.properties.areatype;\r\n        }\r\n        //console.log(feature);\r\n        layer.on('click', function(e) {\r\n          //console.log(e.target);\r\n          //clear style (selected)       \r\n          var layerGroup = mapViewer.getGeoJsonGroup();\r\n          //console.log(e.target);\r\n          //reset style for the whole layer group\r\n          _.each(layerGroup.getLayers(), function(layers) {\r\n            _.each(layers.getLayers(), function(l) {\r\n              layers.resetStyle(l);\r\n            });\r\n          });\r\n          //process selected feature\r\n          var l = e.target; //get selected feature\r\n          var index = null;\r\n          //check whether the layer is currently selected\r\n          for (var i = 0; i < scope.selectedLayers.length; i++) {\r\n            var layer = scope.selectedLayers[i];\r\n            if (l.feature.properties.areacode == layer.feature.properties.areacode) {\r\n              index = i;\r\n            }\r\n          }\r\n          //simulate toggle selection\r\n          if (index != null) {\r\n            scope.selectedLayers.splice(index, 1); //remove current layer from selected\r\n          } else {\r\n            if (scope.singleSelect == true)\r\n              scope.selectedLayers = []; //reset selected layers when single select mode is on\r\n            // scope.selectedFeature = l;\r\n            scope.selectedLayers.push(l); //add selected layer to the collection\r\n          }\r\n\r\n          //set the last selected layer\r\n          if (scope.selectedLayers.length > 0) {\r\n            var sl = scope.selectedLayers[scope.selectedLayers.length - 1];\r\n            scope.selectedFeature = sl;\r\n            scope.selectedFeatureName = sl.feature.properties.name ||\r\n              sl.feature.properties.region ||\r\n              sl.feature.properties[nameField] || ''; //store selected feature name                                     \r\n          } else\r\n\r\n            scope.selectedFeature = null;\r\n\r\n          //map updates\r\n          var areatype = null,\r\n            areacodes = [],\r\n            params;\r\n\r\n          //re-hilight the selected features\r\n          _.each(scope.selectedLayers, function(sl) {\r\n            sl.setStyle(selectedStyle);\r\n            var props = sl.feature.properties;\r\n            //access properties to get area type and code            \r\n            if (typeof props.areatype != 'undefined' && typeof props.areacode != 'undefined') {\r\n              //get areatype\r\n              if (areatype == null)\r\n                areatype = props.areatype; //only set once\r\n\r\n              //get area code\r\n              areacodes.push(props.areacode);\r\n            }\r\n          });\r\n          if (areacodes.length > 0)\r\n            params = {\r\n              areatype: areatype,\r\n              areacode: areacodes.join(',')\r\n            };\r\n          else\r\n            params = {\r\n              areatype: areatype,\r\n              areacode: '0'\r\n            };\r\n          //update charts\r\n          // scope.updateCharts(params);\r\n          scope.mapParams = params;\r\n\r\n          //finally run geom selected call back \r\n          if (typeof scope.onGeomSelected == 'function') {\r\n            scope.onGeomSelected.call(scope, feature, scope.selectedLayers); //pass selected feature as an argument\r\n          }\r\n        });\r\n        layer.on('mouseover', function(e) {\r\n          //set selected style\r\n          var layer = e.target;\r\n          layer.setStyle(mouseoverStyle);\r\n\r\n          if (!L.Browser.ie && !L.Browser.opera) {\r\n            layer.bringToFront();\r\n          }\r\n\r\n          //show text on the hover box\r\n          var prop = e.target.feature.properties;\r\n          var area = prop.name || prop.region || prop[nameField] || '';\r\n          //settext\r\n          scope.$('#hoverOverlay').text(area)\r\n\r\n          if (typeof scope.onFeatureMouseover == 'function')\r\n            scope.onFeatureMouseover(layer);\r\n        });\r\n        layer.on('mouseout', function(e) {\r\n          var layerGroup = mapViewer.getGeoJsonGroup();\r\n          //console.log(e.target);\r\n          //reset style for current target\r\n          _.each(layerGroup.getLayers(), function(l) {\r\n            l.resetStyle(e.target);\r\n          });\r\n\r\n          //re-hilight the selected features\r\n          _.each(scope.selectedLayers, function(l) {\r\n            l.setStyle(selectedStyle);\r\n          });\r\n          //show text on the hover box\r\n          scope.updateHoverText();\r\n          if (typeof scope.onFeatureMouseout == 'function')\r\n            scope.onFeatureMouseout(layer);\r\n        });\r\n      }\r\n    });\r\n  },\r\n  getLayer: function(name) {\r\n    for (var i in this.mapData) {\r\n      var layer = this.mapData[i];\r\n\r\n      if (layer.name == name)\r\n        return layer;\r\n    }\r\n  },\r\n  renderControls: function() {\r\n    var scope = this;\r\n    // var data = this.mapData;\r\n    // // console.log(data);\r\n    // var template = Handlebars.compile($(this.mapControlsTemplate).html());\r\n    // var html = template({\r\n    //   models: data\r\n    // });\r\n    // this.$('div.leaflet-bottom.leaflet-left').html(html);\r\n    // //wire layer controls events\r\n    // this.$('.overlays div.layers').on('click', function(e) {\r\n    //   scope.mapControlClick.call(scope, e); //call callback in this view context\r\n    // });\r\n    // //hover box\r\n    // this.$('div.leaflet-top.leaflet-right').append(\r\n    //   '<div id=\"hoverOverlay\" class=\"layerToggle\" style=\"display: block;\"></div>'\r\n    // );\r\n    // //zoom to extent - insert the zoom to extent button to the 2 zoom in/out buttons\r\n    this.$('div.leaflet-top.leaflet-left .leaflet-control-zoom-in').after([\r\n      ' <a class=\"leaflet-control-zoom-out\" id=\"zoomToExtent\"',\r\n      ' href=\"#\" title=\"Zoom to Full-extent\">',\r\n      '<i class=\"fa fa-globe\"></i>',\r\n      '</a>'\r\n    ].join(''));\r\n    //zoom to extent button\r\n    this.$('#zoomToExtent').on('click', function(e) {\r\n      // new L.LatLng(39.0, -76.70)\r\n      scope.mapViewer.zoomToXY(-75.5994, 38.3607, 10); //zoom to extent of current geojson layer\r\n      return false;\r\n    });\r\n  },\r\n  mapControlClick: function(e) {\r\n    var c = e.currentTarget;\r\n    var name = $(c).attr('data-name');\r\n    console.log('map layer ' + name + ' control clicked');\r\n    //show layer on the map\r\n    this.showLayer(name);\r\n    //add/remove check sign\r\n    this.$(c).parent().find('i[role=\"checkbox\"]').remove();\r\n    $(c).find('p').append('<i class=\"fa fa-check\" role=\"checkbox\"></i>')\r\n    // this.updateCharts(); //load defaults.\r\n    if (typeof this.onLayerChanged == 'function')\r\n      this.onLayerChanged.call(this, name);\r\n  },\r\n  getGeomName: function() {\r\n    var title = '';\r\n    if (this.selectedLayers.length > 1) {\r\n      title = 'Multi Areas';\r\n    } else if (this.selectedFeature == null)\r\n      title = 'Statewide';\r\n    else\r\n      title = this.selectedLayer + ' ' + this.selectedFeatureName;\r\n    return title;\r\n\r\n    // switch (this.selectedLayer) {\r\n    //   case 'State':\r\n    //     title = 'Statewide'\r\n    //     break;\r\n    //   case 'County':\r\n    //     if (this.selectedLayers.length > 1) {\r\n    //       title = 'Multi counties';\r\n    //       break;\r\n    //     }\r\n    //     if (this.selectedFeature == null)\r\n    //       title = 'All counties';\r\n    //     else\r\n    //       title = 'County: ' + this.selectedFeatureName;\r\n    //     break;\r\n    //   case 'Region':\r\n    //   case 'WIA':\r\n    //     if (this.selectedLayers.length > 1) {\r\n    //       title = 'Multi areas';\r\n    //       break;\r\n    //     }\r\n    //     if (this.selectedFeature == null)\r\n    //       title = 'All areas';\r\n    //     else\r\n    //       title = 'Area: ' + this.selectedFeatureName;\r\n    //     break;\r\n    //   case 'Zip':\r\n    //     if (this.selectedFeature == null)\r\n    //       title = 'All zips';\r\n    //     else\r\n    //       title = 'Zip: ' + this.selectedFeatureName;\r\n    //     break;\r\n    // }\r\n    return title;\r\n  },\r\n  updateHoverText: function() {\r\n    var title = this.getGeomName();\r\n    //show text on the hover box\r\n    this.$('#hoverOverlay').text(title);\r\n  },\r\n  getCurrentParams: function() {\r\n    var scope = this,\r\n      areatype = null,\r\n      areacodes = [];\r\n\r\n    _.each(scope.selectedLayers, function(sl) {\r\n      var props = sl.feature.properties;\r\n      //access properties to get area type and code            \r\n      if (typeof props.areatype != 'undefined' && typeof props.areacode != 'undefined') {\r\n        //get areatype\r\n        if (areatype == null)\r\n          areatype = props.areatype; //only set once\r\n\r\n        //get area code\r\n        areacodes.push(props.areacode);\r\n      }\r\n    });\r\n    if (areacodes.length > 0)\r\n      return {\r\n        areatype: areatype,\r\n        areacode: areacodes.join(',')\r\n      };\r\n    else\r\n      return {\r\n        areatype: areatype,\r\n        areacode: '0'\r\n      };\r\n  },\r\n  //select geometry by name\r\n  selectGeom: function(featureNames, selectStyle) {\r\n    var scope = this;\r\n    var mapViewer = this.mapViewer;\r\n    var geoJsonGrp = mapViewer.getGeoJsonGroup();\r\n\r\n    var style = selectStyle || {\r\n      fillOpacity: .5\r\n    };\r\n\r\n    _.each(featureNames, function(f) {\r\n      //loop through featureNames to find the selected geom\r\n      var feature = null;\r\n      //console.log(geoJsonGrp);\r\n      geoJsonGrp.getLayers()[0].eachLayer(function(layer) {\r\n        feature = layer.feature;\r\n        if (typeof feature != 'undefined') {\r\n          //console.log(feature);\r\n          if (feature.properties.name.toLowerCase() == f.toLowerCase()) {\r\n            //found the feature, now select it\r\n            layer.setStyle(style);\r\n            //keep up with last selected feature\r\n            scope.selectedFeature = layer;\r\n            scope.selectedFeatureName = f;\r\n            scope.selectedLayers.push(layer);\r\n          }\r\n        }\r\n      });\r\n      //show text on the hover box\r\n      scope.updateHoverText();\r\n      //select fetures with the attributes specified..to be implemented\r\n      if (typeof this.onGeomSelected == 'function')\r\n        this.onGeomSelected.call(this, feature);\r\n    });\r\n  },\r\n  addClusterMarkers: function(data, popupTemplate) {\r\n    var mapViewer = this.mapViewer;\r\n    mapViewer.clearClusterMarkers(); //clear current clustermakers\r\n    if (typeof data == 'undefined')\r\n      data = this.clusterMarkerCache;\r\n    else\r\n      this.clusterMarkerCache = data;\r\n\r\n    if (data.length == 0) {\r\n      console.log('Can not add cluster markers. Data is empty.');\r\n      return;\r\n    }\r\n    //check switch value\r\n    if (!this.showMarkers)\r\n      return;\r\n\r\n\r\n    //add new cluster markers\r\n    _.each(data, function(d) {\r\n      var m = mapViewer.createMarker(d.y_coord, d.x_coord, {});\r\n      m.bindPopup(d.template, {});\r\n      mapViewer.addClusterMarker(m);\r\n    });\r\n\r\n  },\r\n  clearClusterMarkers: function() {\r\n    var mapViewer = this.mapViewer;\r\n    mapViewer.clearClusterMarkers(); //clear current clustermakers\r\n  },\r\n  setShowMarkers: function(value) {\r\n    this.showMarkers = value;\r\n    if (!value)\r\n      this.clearClusterMarkers();\r\n    else\r\n      this.addClusterMarkers(); //passing no param to add the cached marker data\r\n  },\r\n  zoomToLocation: function(lon, lat, level) {\r\n    let lvl = level || 14;\r\n    this.mapViewer.zoomToPoint({\r\n      x: lon,\r\n      y: lat\r\n    }, lvl);\r\n  },\r\n  setMapClickMode: function(mode) {\r\n    if (mode == 'single')\r\n      this.singleSelect = true;\r\n    else if (mode == 'multi')\r\n      this.singleSelect = false;\r\n    else {\r\n      if (this.singleSelect)\r\n        console.log('Map click mode is: Single selection');\r\n      else\r\n        console.log('Map click mode is: Multi selection')\r\n    }\r\n  }\r\n});\r\n\r\nmodule.exports = map;\n\n\n// WEBPACK FOOTER //\n// ./public/js/shared/view/map.js","/*\r\nAuthor: Tu hoang\r\nESRGC\r\nProvides base (prototype) functions for mapviewer\r\nNote: this class is defined using dx library\r\n\r\nimplements leaflet API\r\noperates foodshed application\r\n*/\r\nvar Class = require('../util/class');\r\nvar MapViewer = require('./mapViewer');\r\n\r\nvar LeafletViewer = Class.define({\r\n  name: 'LeafletViewer',\r\n  extend: MapViewer,\r\n  _className: 'LeafletViewer',\r\n  initialize: function(options) {\r\n    MapViewer.prototype.initialize.apply(this, arguments);\r\n    //map setup\r\n    var minimal = L.tileLayer('https://{s}.tiles.mapbox.com/v3/esrgc.map-y9awf40v/{z}/{x}/{y}.png');\r\n    //var satellite = L.tileLayer('http://{s}.tiles.mapbox.com/v3/esrgc.map-0y6ifl91/{z}/{x}/{y}.png');\r\n\r\n    var baseMaps = {\r\n      \"Base Map\": minimal\r\n        //\"Satellite\": satellite\r\n    }\r\n    this.features = new L.FeatureGroup([\r\n      //new L.Marker([39.0, -76.70]).bindPopup('Some organization'),\r\n      //new L.Marker([39.0, -76.20]).bindPopup('Abc company'),\r\n      //new L.Marker([38.9, -76.0]).bindPopup('Eastern shore company'),\r\n      //new L.Marker([38.36, -75.59]).bindPopup('Salisbury University')\r\n    ]);\r\n    this.geoJsonFeatures = L.geoJson();\r\n    this.clusterGroup = new L.MarkerClusterGroup(this.clusterOptions);\r\n\r\n    var overlayMaps = {\r\n      //'State': stateBoundary,\r\n      //'Counties': counties,\r\n      'Overlays': this.geoJsonFeatures\r\n\r\n    }\r\n    this.map = L.map(this.el, {\r\n      layers: [\r\n        minimal,\r\n        this.features,\r\n        this.geoJsonFeatures,\r\n        this.clusterGroup\r\n      ],\r\n      center: this.center || new L.LatLng(39.0, -76.70),\r\n      zoom: this.zoomLevel || 7,\r\n      scrollWheelZoom: this.scrollZoom || false\r\n    });\r\n\r\n\r\n    //copy layers to layer controls\r\n    if (typeof this.baseLayers != 'undefined')\r\n      for (var i in this.baseLayers) {\r\n        var layer = this.baseLayers[i];\r\n        if (layer !== undefined)\r\n          baseMaps[i] = layer;\r\n      }\r\n    var overlayMaps = {\r\n      //other overlay layers go here\r\n      //feature layer\r\n      //'Features': this.features,\r\n      'Overlays': this.geoJsonFeatures\r\n    };\r\n    if (typeof this.overlays != 'undefined') {\r\n      for (var i in this.overlays) {\r\n        var layer = this.overlays[i];\r\n        overlayMaps[i] = layer;\r\n      }\r\n    }\r\n    //L.control.layers(baseMaps, overlayMaps).addTo(this.map);\r\n    //L.control.scale().addTo(this.map);\r\n  },\r\n  getGeoJsonGroup: function() {\r\n    return this.geoJsonFeatures;\r\n  },\r\n  getFeatureGroup: function() {\r\n    return this.features;\r\n  },\r\n  addGeoJsonLayer: function(data, option) {\r\n    if (typeof data == 'undefined') {\r\n      console.log('No data found')\r\n      return;\r\n    }\r\n    console.log('Adding data to map...');\r\n    //console.log(data);\r\n    if (this.geoJsonFeatures != 'undefined') {\r\n      if (typeof option == 'undefined')\r\n        this.geoJsonFeatures.addLayer(L.geoJson(data));\r\n      else\r\n        this.geoJsonFeatures.addLayer(L.geoJson(data, option));\r\n    }\r\n    console.log('------Data added to map');\r\n  },\r\n  clearGeoJsonFeatures: function() {\r\n    if (this.geoJsonFeatures != 'undefined')\r\n      this.geoJsonFeatures.clearLayers();\r\n  },\r\n  addFeatureToFeatureGroup: function(feature) {\r\n    var features = this.features;\r\n    if (typeof features == 'undefined') {\r\n      console.log('No feature group found');\r\n      return;\r\n    }\r\n    if (feature != null)\r\n      features.addLayer(feature);\r\n  },\r\n  clearFeatures: function() {\r\n    var features = this.features;\r\n    if (typeof features == 'undefined') {\r\n      console.log('No feature group found');\r\n      return;\r\n    }\r\n    features.clearLayers();\r\n  },\r\n  createFeature: function(obj) {\r\n    var wkt = new Wkt.Wkt();\r\n    wkt.read(obj);\r\n    var f = wkt.toObject();\r\n    return f;\r\n  },\r\n  createMarker: function(lat, lng, options) {\r\n    return L.marker(L.latLng(lat, lng), options);\r\n  },\r\n  addClusterMarker: function(marker) {\r\n    if (typeof this.clusterGroup == 'undefined')\r\n      return;\r\n    this.clusterGroup.addLayer(marker);\r\n  },\r\n  clearClusterMarkers: function() {\r\n    this.clusterGroup.clearLayers();\r\n  },\r\n  getClusterGroup: function(){\r\n    return this.clusterGroup;\r\n  },\r\n  getFeaturesBound: function() {\r\n    var features = this.features;\r\n    if (typeof features == 'undefined') {\r\n      console.log('No feature group found');\r\n      return;\r\n    }\r\n    return features.getBounds();\r\n  },\r\n  getGeoJsonFeaturesBound: function() {\r\n    var features = this.geoJsonFeatures;\r\n    if (typeof features == 'undefined') {\r\n      console.log('No geojson feature found');\r\n      return;\r\n    }\r\n    return features.getBounds();\r\n  },\r\n  zoomToFeatures: function() {\r\n    var bounds = this.getFeaturesBound();\r\n    if (typeof bounds != 'undefined')\r\n      this.map.fitBounds(bounds);\r\n  },\r\n  zoomToGeoJsonFeatures: function() {\r\n    var bounds = this.getGeoJsonFeaturesBound();\r\n    if (typeof bounds != 'undefined')\r\n      this.map.fitBounds(bounds);\r\n  },\r\n  zoomToPoint: function(point, zoom) {\r\n    var z = zoom || this.map.getMaxZoom(); //default zoom\r\n    if (typeof point.x != 'undefined' && typeof point.y != 'undefined') {\r\n      var latlng = new L.LatLng(point.y, point.x);\r\n      this.map.setView(latlng, z);\r\n    } else {\r\n      this.map.setView(point, z);\r\n    }\r\n  },\r\n  pointInPolygon: function(point, vs) {\r\n    // ray-casting algorithm based on\r\n    // http://www.ecse.rpi.edu/Homepages/wrf/Research/Short_Notes/pnpoly.html\r\n\r\n    var x = point[0],\r\n      y = point[1];\r\n\r\n    var inside = false;\r\n    for (var i = 0, j = vs.length - 1; i < vs.length; j = i++) {\r\n      var xi = vs[i][0],\r\n        yi = vs[i][1];\r\n      var xj = vs[j][0],\r\n        yj = vs[j][1];\r\n\r\n      var intersect = ((yi > y) != (yj > y)) && (x < (xj - xi) * (y - yi) / (yj - yi) + xi);\r\n      if (intersect) inside = !inside;\r\n    }\r\n\r\n    return inside;\r\n  }\r\n\r\n});\r\n\r\nmodule.exports = LeafletViewer;\r\n\n\n\n// WEBPACK FOOTER //\n// ./public/js/map/leafletViewer.js","/*\r\nTu Hoang\r\nESRGC\r\n2014\r\n\r\nclass.js\r\nutility functions that implements OOP\r\n*/\r\n\r\n/*\r\nfunction that defines a new class by passing a new\r\nprototype object (literal) as parameter. New classes\r\ncan extend/inherit from other classes by passing the \r\ninherit class name to extend property of the new class \r\nprototype object\r\n\r\nExample:\r\nvar newClass = dx.define({\r\nextend: OtherClass,\r\ninitialize: function(options){\r\n};\r\n});\r\n*/\r\nvar define = function(child) {\r\n  var ch = child;\r\n  var p = ch.extend;\r\n  var _class_ = null;\r\n  if (p == null || typeof p == 'undefined') {\r\n    _class_ = function() {\r\n      if (typeof this.initialize != 'undefined')\r\n        this.initialize.apply(this, arguments);\r\n    };\r\n    _class_.prototype = ch;\r\n  } else {\r\n    _class_ = function() {\r\n      var init = typeof this.initialize == 'function' ? this.initialize : 'undefined';\r\n      //run child initialize function if exists\r\n      if (typeof init == 'function') {\r\n        init.apply(this, arguments);\r\n      }\r\n    };\r\n    extend(_class_, p); //inherit prototype\r\n    copy(_class_.prototype, ch); //augment prototype\r\n  }\r\n  return _class_;\r\n};\r\n/*\r\nDeep copy object prototype by new keyword.\r\nThis method creates a new prototype object, whose prototype \r\nis a copy of the parent's prototype, and assign it to the child prototype.\r\nFinally, sets the child's prototype constructor to the child's constructor\r\n*/\r\nvar extend = function(child, parent) {\r\n  var F = function() {};\r\n  F.prototype = parent.prototype;\r\n  child.prototype = new F();\r\n  child.prototype.constructor = child;\r\n  child.parent = parent.prototype;\r\n};\r\n//copy object properties\r\nvar copy = function(dest, source) {\r\n  dest = dest || {};\r\n  if (source) {\r\n    for (var property in source) {\r\n      var value = source[property];\r\n      if (value !== undefined) {\r\n        dest[property] = value;\r\n      }\r\n    }\r\n    /**\r\n     * IE doesn't include the toString property when iterating over an object's\r\n     * properties with the for(property in object) syntax.  Explicitly check if\r\n     * the source has its own toString property.\r\n     */\r\n    /*\r\n     * FF/Windows < 2.0.0.13 reports \"Illegal operation on WrappedNative\r\n     * prototype object\" when calling hawOwnProperty if the source object\r\n     * is an instance of window.Event.\r\n     */\r\n\r\n    var sourceIsEvt = typeof window.Event == \"function\" && source instanceof window.Event;\r\n\r\n    if (!sourceIsEvt &&\r\n      source.hasOwnProperty && source.hasOwnProperty(\"toString\")) {\r\n      dest.toString = source.toString;\r\n    }\r\n  }\r\n  return dest;\r\n};\r\n\r\nmodule.exports = {\r\n  define: define,\r\n  extend: extend,\r\n  copy: copy\r\n};\n\n\n// WEBPACK FOOTER //\n// ./public/js/util/class.js","/*\r\nAuthor: Tu hoang\r\nESRGC\r\nProvides base (prototype) functions for mapviewer\r\n\r\nThis class implement leaflet API\r\n*/\r\n\r\nvar Class = require('../util/class');\r\n\r\nvar MapViewer = Class.define({\r\n    name: 'MapViewer',\r\n    _className: 'MapViewer',\r\n    initialize: function(options) {\r\n      Class.copy(this, options);//copy all options to this class\r\n    },\r\n    zoomToExtent: function(extent) {\r\n        this.map.fitBounds(new L.LatLngBounds(new L.LatLng(extent.xmin, extent.ymin),\r\n         new L.LatLng(extent.xmax, extent.ymax)));\r\n    },\r\n    zoomToFullExtent: function() {\r\n    },\r\n    //zoom to xy (if level exists then zoom to that level otherwise maxlevel is used)\r\n    zoomToXY: function(x, y, level) {\r\n        if (typeof level == 'undefined')\r\n            this.map.setView(new L.LatLng(y, x), this.map.getMaxZoom());\r\n        else\r\n            this.map.setView(new L.LatLng(y, x), level);\r\n    },\r\n    zoomIn: function() {\r\n        this.map.zoomIn();\r\n    },\r\n    zoomOut: function() {\r\n        this.map.zoomOut();\r\n    },\r\n    zoomToDataExtent: function(layer) {\r\n        this.map.fitBounds(layer.getBounds());\r\n    },\r\n    panTo: function(x, y) {\r\n        this.map.panTo(new L.LatLng(y, x));\r\n    },\r\n    locate: function() {\r\n        this.map.locateAndSetView(this.map.getMaxZoom() - 2);\r\n    }\r\n\r\n});\r\n\r\nmodule.exports = MapViewer;\n\n\n// WEBPACK FOOTER //\n// ./public/js/map/mapViewer.js","/*\r\nTu Hoang\r\nMarch 2017\r\n\r\nCalendar view\r\n\r\nevent callbacks: \r\nonEventClick(event, jsEvent, view)\r\nonEventsLoaded(eventData, view)\r\n\r\n*/\r\n\r\n\r\nvar Calendar = Backbone.View.extend({\r\n  name: 'CalendarView',\r\n  el: '#calendar-area',\r\n  render: function() {\r\n    var scope = this;\r\n    this.$('#calendar').fullCalendar({\r\n      //init full calendar \r\n      header: {\r\n        left: 'prev,next,today',\r\n        center: 'title',\r\n        right: 'month,agendaWeek,agendaDay,listMonth'\r\n      },\r\n      editable: false,\r\n      eventSources: [\r\n        //event feed\r\n        {\r\n          url: 'feed' // use the `url` property\r\n            // color: 'yellow', // an option!\r\n            // textColor: 'black' // an option!\r\n        }\r\n\r\n        // any other sources...\r\n\r\n      ],\r\n      eventLimit: true,\r\n      eventMouseover: (event, jsEvent, view) => {\r\n        //register call back and trigger here\r\n        if (typeof scope.onEventMouseOver == 'function')\r\n          scope.onEventMouseOver.call(scope, event, jsEvent, view);\r\n      },\r\n      eventClick: (event, jsEvent, view) => {\r\n        console.log(event);\r\n        //register call back and trigger here\r\n        if (typeof scope.onEventClick == 'function')\r\n          scope.onEventClick.call(scope, event, jsEvent, view);\r\n      },\r\n      loading: (isLoading, view) => {\r\n        if (!isLoading){\r\n          console.log('done fetching event data!');\r\n          var eventData = $('#calendar').fullCalendar('clientEvents');\r\n          // console.log(eventData);\r\n          if(typeof scope.onEventsLoaded == 'function'){\r\n          \tscope.onEventsLoaded.call(scope, eventData, view);\r\n          }\r\n\r\n        }\r\n\r\n      }\r\n\r\n    });\r\n  }\r\n});\r\n\r\nmodule.exports = Calendar;\r\n\n\n\n// WEBPACK FOOTER //\n// ./public/js/event/index/view/calendar.js"],"sourceRoot":""}